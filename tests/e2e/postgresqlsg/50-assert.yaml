apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 600
---
apiVersion: vshn.appcat.vshn.io/v1
kind: VSHNPostgreSQL
metadata:
  name: pg-sg-e2e-restore
  finalizers:
  - finalizer.apiextensions.crossplane.io
spec:
  compositeDeletePolicy: Background
  compositionRef:
    name: vshnpostgres.vshn.appcat.vshn.io
  parameters:
    restore:
      claimName: pg-sg-e2e
    security:
      deletionProtection: false
    backup:
      schedule: '0 22 * * *'
    service:
      majorVersion: "15"
    size:
      plan: standard-2
  writeConnectionSecretToRef:
    name: pg-sg-e2e-restore-creds
status:
  conditions:
    - status: "True"
    - status: "True"

---
apiVersion: v1
kind: Secret
type: connection.crossplane.io/v1alpha1
metadata:
  name: pg-sg-e2e-restore-creds
  ownerReferences:
    - apiVersion: vshn.appcat.vshn.io/v1
      kind: VSHNPostgreSQL
      name: pg-sg-e2e-restore
