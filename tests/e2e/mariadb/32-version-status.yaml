apiVersion: kuttl.dev/v1beta1
kind: TestStep
commands:
  - script: |
      set -e
      VERSION=$(kubectl get vshnmariadb mariadb-e2e -n $NAMESPACE -o jsonpath='{.status.mariadbVersion}')
      echo "MariaDB version in status: $VERSION"
      if echo "$VERSION" | grep -qE '^[0-9]+\.[0-9]+\.[0-9]+.*$'; then
        echo "SUCCESS: mariadbVersion is set: $VERSION"
        exit 0
      else
        echo "FAIL: mariadbVersion '$VERSION' is not in expected format"
        exit 1
      fi
